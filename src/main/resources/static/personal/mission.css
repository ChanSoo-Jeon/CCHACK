/* styles.css */
:root{
  --bg:#f5f7fb;
  --surface:#ffffff;
  --ink:#0b1220;
  --muted:#7b8694;
  --line:#e6e9ef;
  --primary:#2f6af2;
  --primary-ink:#ffffff;
  --icon-bg:#eef3ff;
  --chip:#f1f3f7;
  --ok:#00b894;
  --shadow:0 6px 18px rgba(14,22,34,.06), 0 1px 2px rgba(14,22,34,.05);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--ink);
  font-family:system-ui,-apple-system,"Noto Sans KR",Segoe UI,Roboto,Apple SD Gothic Neo,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.safe{height:10px}

/* 헤더 */
header{
  position:sticky; top:0; z-index:10;
  backdrop-filter:saturate(1.1) blur(8px);
  background:rgba(245,247,251,.75);
  border-bottom:1px solid var(--line);
}
.nav-top{
    max-width:90vw;
    margin:0 auto;
    display:flex;
    align-items:center;
    gap:16px;
    padding:12px 16px;
    justify-content:center;
}
.brand{font-weight:800;letter-spacing:-.2px}
.spacer{flex:1}
.tabs{display:none; gap:0.5rem} /* 8px = 0.5rem */
.tabs a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:10px}
.tabs a.active,.tabs a:hover{background:#eaf0ff;color:var(--primary)}

.title-wrap{max-width:68.75rem;margin:0.75rem auto 0.25rem;padding:0 1rem}
h1{margin:18px 0 2px;font-size:28px;line-height:1.28;letter-spacing:-.3px}
.subtitle{color:var(--muted);margin:0 0 12px}

/* 그리드 */
.grid{max-width:68.75rem;margin:0 auto;padding:0.5rem 1rem 5.75rem;display:grid;grid-template-columns:1fr;gap:1rem}
@media (min-width:37.5rem){ .grid{grid-template-columns:repeat(2,1fr)} } /* 600px = 37.5rem */
@media (min-width:56.25rem){ .grid{grid-template-columns:repeat(3,1fr)} } /* 900px = 56.25rem */
@media (min-width:75rem){ .grid{grid-template-columns:repeat(4,1fr)} } /* 1200px = 75rem */

/* 카드 */
.card{
  background:var(--surface); border:1px solid var(--line); border-radius:22px;
  padding:18px 18px 16px; display:flex; flex-direction:column; gap:10px;
  box-shadow:var(--shadow); cursor:pointer; transition:transform .08s ease;
}
.card:active{transform:translateY(1px)}
.card:focus-visible{outline:2px solid #9cc2ff; outline-offset:2px}
.card-head{display:flex;align-items:center;gap:12px}
.icon{
  width:48px;height:48px;border-radius:14px;display:grid;place-items:center;
  background:var(--icon-bg);font-size:24px;border:1px solid #dfe7ff;
}
.meta{color:var(--muted);font-size:14px}
.cta{margin-top:2px; font-size:22px; font-weight:800; color:var(--primary); letter-spacing:-.2px}
.foot{margin-top:6px; display:flex; align-items:center; justify-content:space-between; color:var(--muted); font-size:13px}
.badge{background:var(--chip);border:1px solid var(--line);padding:4px 8px;border-radius:999px}
.badge.primary{color:var(--primary);font-weight:700}


.bn-item{padding:10px 6px 12px;text-align:center;color:#7c8796;font-size:12px;text-decoration:none}
.bn-item .i{display:block;font-size:20px;margin-bottom:4px}
.bn-item.active{color:var(--primary)}
@media (min-width:900px){ .bottom-nav{display:none} .tabs{display:flex} }

/* 모달 */
.modal{position:fixed;inset:0;display:none;z-index:30}
.modal.open{display:block}
.overlay{position:absolute;inset:0;background:rgba(13,18,28,.35)}
.sheet{
  position:absolute;left:50%;transform:translateX(-50%);width:min(560px,92vw);
  background:var(--surface);border:1px solid var(--line);border-radius:20px;overflow:hidden;
  box-shadow:0 24px 64px rgba(10,16,28,.16), var(--shadow);
}
.sheet.center{top:50%;transform:translate(-50%,-50%)}
.m-head{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--line)}
.m-title{font-weight:800}
.close{border:0;background:#eef1f6;color:#2b3645;border-radius:10px;width:36px;height:36px;cursor:pointer}
.m-body{padding:14px 16px 18px;display:grid;gap:10px}
.desc{color:#3a4658}
.row-actions{display:flex;gap:8px;justify-content:flex-end}
.btn{border:1px solid var(--line);background:#f7f9fc;color:var(--ink);border-radius:12px;padding:10px 12px;cursor:pointer}
.btn.primary{background:var(--primary);border-color:var(--primary);color:var(--primary-ink);font-weight:800}

/* 업로드 시트 */
.drop{
  position:relative;border:1px dashed #cfd6e3;border-radius:14px;min-height:180px;
  display:grid;place-items:center;background:#fafbff;color:#687386
}
.drop input{position:absolute;inset:0;opacity:0;cursor:pointer}
.hint{color:#687386}
.preview{width:100%;aspect-ratio:16/9;border-radius:12px;overflow:hidden;background:#f1f3f7;border:1px solid var(--line);display:none}
.preview img{width:100%;height:100%;object-fit:cover}

textarea{
  width:100%;padding:12px 12px 14px;background:#fbfcfe;border:1px solid var(--line);border-radius:14px;
  color:var(--ink);resize:vertical;min-height:90px;outline:none;
}

@media (max-width: 767px){
  .sheet{bottom:0;border-radius:20px 20px 0 0;transform:translateX(-50%);max-height:86vh;overflow:auto}
  .sheet.center{top:auto;transform:translateX(-50%)}
}

.mission-card { position: relative; }
.mission-card.is-done {
    opacity: .65;
    filter: grayscale(.15) saturate(.6);
    border: 1px dashed #94a3b8;
    pointer-events: none;            /* 마우스 클릭 완전 차단 */
}
.mission-card.is-done * { cursor: default !important; user-select: none; }
.mission-card.is-done .cta { text-decoration: line-through; }

.badge.done { background:#16a34a; color:#fff; border:none; }

.done-overlay{
    position:absolute; inset:0;
    display:flex; align-items:center; justify-content:center;
    font-weight: 800;
    background: linear-gradient( to bottom right, rgba(255,255,255,.82), rgba(255,255,255,.55) );
    border-radius: inherit;
}







/* 카드 기준 좌표계 */
.mission-card { position: relative; overflow: hidden; }

/* 기존 opacity로 카드 전체를 낮추는 규칙이 있다면 지우고,
   대신 반투명 오버레이로 흐리게 처리 (도장보다 아래 z-index) */
.mission-card.is-done::before{
    content:"";
    position:absolute; inset:0;
    background:#fff;
    opacity:.55;                 /* 흐림 정도 */
    z-index: 10;
    pointer-events:none;
    /* 선택: 살짝 그레인/점선 효과 원하면 배경이미지 추가 가능 */
}

/* 도장: 최상단으로 */
.mission-card.is-done::after{
    content:"해결완료";
    position:absolute; inset:0;
    display:flex; align-items:center; justify-content:center;
    z-index: 20;                  /* before(10)보다 위 */
    pointer-events:none;

    font-weight:900;
    letter-spacing:.18em;
    /* 한국어라 대문자 변환 불필요: text-transform 제거 */
    color:#2e7d32;                /* 빨강 원하면 #d61f1f */
    border:4px solid currentColor;
    border-radius:9999px;
    padding:12px 24px;
    width: fit-content; height: fit-content; margin:auto;
    transform: rotate(-12deg);
    background: rgba(255,255,255,.65);
    mix-blend-mode:multiply;
    box-shadow:
            0 0 0 2px rgba(255,255,255,.9) inset,
            0 10px 24px rgba(0,0,0,.18);
    animation: stamp-in .45s cubic-bezier(.2,.7,.2,1) both;
}

/* 이미지만 살짝 desaturate */
.mission-card.is-done img,
.mission-card.is-done .thumb { filter: grayscale(.15) saturate(.8); }

/* 애니메이션 */
@keyframes stamp-in{
    0%   { transform: scale(1.8) rotate(-12deg); opacity:0; }
    70%  { transform: scale(.96) rotate(-12deg); opacity:1; }
    100% { transform: scale(1)   rotate(-12deg); }
}

/* 모서리 버전 원하면 아래만 적용
.mission-card.is-done::after{
  inset:auto; top:10px; right:10px; margin:0; transform: rotate(-18deg);
}
*/